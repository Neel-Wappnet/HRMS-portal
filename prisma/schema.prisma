// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Department {
  id       Int    @id @default(autoincrement())
  deptName String
  employee Employee[]

}

model Employee {
  id Int @id @default(autoincrement()) 
  empCode String @unique
  name String
  email String @unique
  department Department? @relation(fields: [departmentId],references: [id])
  departmentId Int?
  role String
  designation String
  birthDate DateTime
  reportingUser String
  profileImage String
  contactNo BigInt
  address String
  user User?
  leaveMaster LeaveMaster?
  leave Leave[]
}

model User {
  id         Int    @id @default(autoincrement())
  employee   Employee? @relation(fields: [employeeId], references: [id],onDelete: Cascade, onUpdate: Cascade)
  employeeId Int? @unique
  email      String
  password   String
}

model LeaveMaster {
  id Int @id @default(autoincrement())
  employee Employee? @relation(fields: [employeeId],references: [id],onDelete: Cascade,onUpdate: Cascade)
  employeeId Int? @unique
  leaveBalance Int
}

model Leave {
  id Int @id @default(autoincrement())
  employee Employee? @relation(fields: [employeeId],references: [id],onDelete: Cascade,onUpdate: Cascade)
  employeeId Int?
  subject String
  startDate DateTime
  endDate DateTime
  leaveReason String
  approved Boolean
}

model Holiday {
  id Int @id @default(autoincrement())
  title String
  startDate DateTime
  endDate DateTime
  isOptional Boolean @default(false)
  status String
}

